# phonetic-algorithmIPA

```
pip install phonetic-algorithmIPA
```

Фонетический алгоритм - это алгоритм сравнения слов на основе их произношения. Идеей данного алгоритма является приведение строк, записанных с помощью графем, к фонетическому представлению и их сравнение с помощью различных метрик поиска расстояния.  Универсальность алгоритма достигается за счет использования Международного Фонетического Алфавита (МФА). Алгоритм представляет каждый символ транскрипции, записанной с помощью МФА, в виде вектора, описывающего звук с точки зрения фонетических признаков. В качестве такого описания нами была выбрана фонологическая система Хомского и Халле. Расстояние между транскрипциями рассчитывается с помощью модифицированного варианта расстояния Дамерау-Левенштейна, где стоимость замены равна расстоянию между векторами символов транскрипции.

Note: пакет еще находится в разработке


## Обозначение ударения 
#### V1…Vn_n - основное ударение 
где V1…Vn - это гласные, находящиеся под ударением, «_» - знак основного ударения, а n - это количество соответствующих ударных гласных.
#### V1…Vn=n - побочное ударение 
где V1…Vn - это гласные, находящиеся под ударением, «=» - знак побочного ударения, а n - это количество ударных гласных.

Обозначения, принятые в МФА не учитываются!!!
«ˈ» - для обозначения основного ударения (mother [ˈmʌðə])
«ˌ» - для обозначения побочного ударения (pronunciation [prəˌnʌnsɪˈeɪʃn])

# Getting started
Пакет включает в себя модуль phonetic_distance. Чтобы приступить к работе, инициализируйте класс PhoneticAlgorithmIPA() из модуля phonetic_distance.

```
>>> from phonetic_algorithmIPA import ipa_distances
>>> ipa = ipa_distances.PhoneticAlgorithmIPA()
```

Класс имеет следующий функционал:


## Описание пакета

### phonetic_distance(path, delimiter=';', typ='Non LS', irrelevant_features=[], normalize=False)
Функция осуществляет расчет расстояний между транскприпциями, записанными с помощью МФА. Аргументы: 
1) path - путь к csv-файлу со строками, между которыми должны быть посчитаны расстояния (2 колонки без названий)

2) delimiter - разделитель для файла

3) typ - тип задачи: LS или Non LS

LS - Тип задачи, когда необходимо не учитывать признаки, которые являются нерелевантными для конкретной исследовательской задачи. Определение нерелевантных признаков может производится двумя способами: 

1) Пользователь сам указывает те признаки, которые не нужно учитывать (агрумент irrelevant_features).
2) Программа анализирует звуки, между которыми должны быть рассчитаны расстояния, определяет признаки, которые не встретились ни у одного элемента и удаляет их из признаковой таблицы.

В случае Non LS никаких изменений в данных не происходит, расстояния считаются с учетом всех значений признаков. 

4) normalize - типа нормализации: <br>
False - Без нормализации;<br>
mean - Расчет расстояний с нормализацией по среднему значению длин слов;<br>
max - Расчет расстояний с нормализацией по самому длинному слову;<br>
min - Расчет расстояний с нормализацией по длине самого короткого слова;<br>
 
```
>>> with open('test2.csv', 'r', encoding='utf-8') as f:
       arr = f.read()
>>> arr
‘haʊ_2s;maʊ_2s’

>>> c = ipa.phonetic_distance(‘test2.csv’)
[[0.36]]
```

### phonetic_transformer(data_path, rules_path, delimiter=';', typ='Non LS', irrelevant_features=[], normalize=False, cons_u=[], vows_u=[])
Функция осуществляет автоматическую трансформацию строк в фонетические представления.

1) data_path - путь к csv-файлу со строками, между которыми должны быть посчитаны расстояния (2 колонки без названий).

2) rules_path -  путь к таблице соответствий графем и звуков и контекстов, в которых данные соответствия реализуются, и списки гласных (vows_u) и согласных графем для конкретного языка (cons_u). 

3) delimiter - разделитель для файлов. Он должен быть одинаковым для обоих файлов.

4) typ - тип задачи: LS или Non LS

LS - Тип задачи, когда необходимо не учитывать признаки, которые являются нерелевантными для конкретной исследовательской задачи. Определение нерелевантных признаков может производится двумя способами: 

1) Пользователь сам указывает те признаки, которые не нужно учитывать (агрумент irrelevant_features).
2) Программа анализирует звуки, между которыми должны быть рассчитаны расстояния, определяет признаки, которые не встретились ни у одного элемента и удаляет их из признаковой таблицы.

В случае Non LS никаких изменений в данных не происходит, расстояния считаются с учетом всех значений признаков. 

5) normalize - типа нормализации: <br>
False - Без нормализации;<br>
mean - Расчет расстояний с нормализацией по среднему значению длин слов;<br>
max - Расчет расстояний с нормализацией по самому длинному слову;<br>
min - Расчет расстояний с нормализацией по длине самого короткого слова;<br>
 
```
>>> with open('test2.csv', 'r', encoding='utf-8') as f:
       arr = f.read()
>>> arr
‘haʊ_2s;maʊ_2s’

>>> c = ipa.phonetic_distance(‘test2.csv’)
[[0.36]]
```

###### Типы контектов для правил:

Допустим есть графема А и ее МФА эквивалент В

1) X_Y - А реализуется как В в позиции между Х и Y<br>
2) #_  - А реализуется как В в позиции начала слова<br>
3) _# - А реализуется как В в позиции конца слова<br>
4) _Y - А реализуется как В  в позиции перед Y<br>
5) X_ - А реализуется как В в позиции после X<br>
6) пустая строчка - А реализуется как В в любой позиции<br>
7) X_Y - А выпадает в позиции между Х и Y<br>
8) _* - А реализуется как В в позиции перед ударным гласным<br>
9) @_ - А реализуется как В в позиции перед гласным<br>
10) &_& - А реализуется как В в позиции между двумя согласными<br>


### add_columns(dict)
Функция позволяет добавить новые признаки в артикуляционную систему. На вход программе подается словарь, в котором ключом является название признака, а значением - список значений длиной, равной количеству звуков в системе. Признаки могут принимать значения «+», «-» и «0». Например, {‘sonorant’: [+, -, 0]}.
 
### add_rows(dict)
add_rows позволяет добавить символ МФА в артикуляционную систему. На вход программе подается словарь, в котором ключом является символ, а значением - список значений длиной, равной количеству признаков в системе. Признаки могут принимать значения «+», «-» и «0». Например, {‘a’: [+, -, 0]}.

### add_diacritics(dict)
add_diacritics позволяет добавить диакритический или супрасегментный символ в систему. На вход программе подается словарь, в котором ключом является символ, а значением - список, состоящий из позиции символа относительно звука и словаря признаков, которые он меняет. Позиция может принимать значения post, pre, between. Позицией для диакритик, которые располагаются над или под звуками, является post. Например, {‘ⁿ’: [‘post’, {‘nasal’: ‘+’}]}.

##### !!!
Диакритиками не могут быть: "_", "=", "@", "#" и цифры

### change_feature_table(dict)
Функция позволяет изменить значения существующих в системе признаков следующими тремя способами: 

{sound : {feature: value}} - изменение значения определенного признака у определенных звуков; 

{sound: [values]} - изменение всех значений определенного звука;

{feature: [values]} - изменение всех значений определенного признака.

### default_settings()
default_settings обеспечивает возврат к первоначальным артикуляционной системе признаков.
